(function(){"use strict";var t={9950:function(t,e,s){var n=s(9242),a=(s(7658),s(3396)),i=s(7139);const o=t=>((0,a.dD)("data-v-139fb890"),t=t(),(0,a.Cn)(),t),r=o((()=>(0,a._)("div",{class:"texture"},null,-1))),l={class:"offline"},c={class:"navPanel"};function d(t,e,s,o,d,u){const p=(0,a.up)("router-view"),m=(0,a.up)("SettingButton"),h=(0,a.up)("HomeButton"),g=(0,a.up)("HistoryButton"),f=(0,a.up)("SettingModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[r,(0,a._)("div",{class:(0,i.C_)(["filter",{nightFilter:d.nightMode}])},null,2),(0,a._)("div",{class:(0,i.C_)(["nightFilter",{nightFilterOn:d.nightMode}])},null,2),(0,a._)("div",{class:(0,i.C_)(["root",{night:d.nightMode}]),onselectstart:"return false"},[(0,a.wy)((0,a._)("div",l,"сенсор недоступен",512),[[n.F8,!d.isAliveSensor]]),(0,a.Wm)(p,{class:"router",time:d.time,onOnChangeMode:e[0]||(e[0]=t=>d.nightMode=!d.nightMode),autoMode:d.autoMode,nightMode:d.nightMode,sensors:d.sensors,circleSize:d.circleSize,queryResult:d.queryResult,wsAlive:d.wsAlive,onOnQuery:u.getData},null,8,["time","autoMode","nightMode","sensors","circleSize","queryResult","wsAlive","onOnQuery"]),(0,a._)("div",c,[(0,a.Wm)(m,{onClick:e[1]||(e[1]=t=>d.settingView=!d.settingView),nightMode:d.nightMode},null,8,["nightMode"]),(0,a.Wm)(h,{nightMode:d.nightMode,onClick:e[2]||(e[2]=e=>t.$router.push("/"))},null,8,["nightMode"]),(0,a.Wm)(g,{nightMode:d.nightMode,onClick:e[3]||(e[3]=e=>t.$router.push("/history"))},null,8,["nightMode"])]),(0,a.wy)((0,a.Wm)(f,{onClick:e[4]||(e[4]=(0,n.iM)((t=>d.settingView=!1),["self"])),autoMode:d.autoMode,onSwitchAutoMode:e[5]||(e[5]=t=>d.autoMode=!d.autoMode),first:d.sensors.ppmRange.first,"onUpdate:first":e[6]||(e[6]=t=>d.sensors.ppmRange.first=t),second:d.sensors.ppmRange.second,"onUpdate:second":e[7]||(e[7]=t=>d.sensors.ppmRange.second=t),third:d.sensors.ppmRange.third,"onUpdate:third":e[8]||(e[8]=t=>d.sensors.ppmRange.third=t),sunset:d.timeOfSun.sunset,"onUpdate:sunset":e[9]||(e[9]=t=>d.timeOfSun.sunset=t),dawn:d.timeOfSun.dawn,"onUpdate:dawn":e[10]||(e[10]=t=>d.timeOfSun.dawn=t),onUpdatePpm:u.updatePpmRange,onUpdateTimeOfSun:u.updateTimeOfSun},null,8,["autoMode","first","second","third","sunset","dawn","onUpdatePpm","onUpdateTimeOfSun"]),[[n.F8,d.settingView]])],2)],64)}var u={data(){return{nightMode:!1,autoMode:!0,settingView:!1,queryResult:[],timeOfSun:{dawn:"07:00",sunset:"22:30"},sensors:{inTemp:null,inTempAHT:null,hum:null,outTemp:null,press:null,ppm:null,ppmState:{green:!1,yellow:!1,orange:!1,red:!1},ppmRange:{first:600,second:1200,third:3e3}},isAliveSensor:!1,ws:null,wsAlive:!1,time:{blink:!1,hour:"",min:"",day:"",date:"",month:"",year:""},circleSize:{cxy:125,r:100}}},methods:{connect(){this.ws=new WebSocket("wss://peredaifile.ru:3031"),this.ws.onopen=()=>{this.wsAlive=!0},this.ws.onmessage=t=>{let e=JSON.parse(t.data);if("sensors"==e.type){if(this.sensors.inTemp=-(-e.value.inTemp).toFixed(1),this.sensors.outTemp=-(-e.value.outTemp).toFixed(1),this.sensors.press=-(-e.value.press).toFixed(),this.sensors.inTempAHT=e.value.inTempAHT,this.sensors.hum=-(-e.value.hum).toFixed(),this.sensors.ppm=-(-e.value.ppm).toFixed(),this.isAliveSensor=e.value.isAlive,this.sensors.ppm<=this.sensors.ppmRange.first){for(let t in this.sensors.ppmState)this.sensors.ppmState[t]=!1;this.sensors.ppmState.green=!0}if(this.sensors.ppm>this.sensors.ppmRange.first&&this.sensors.ppm<=this.sensors.ppmRange.second){for(let t in this.sensors.ppmState)this.sensors.ppmState[t]=!1;this.sensors.ppmState.yellow=!0}if(this.sensors.ppm>this.sensors.ppmRange.second&&this.sensors.ppm<=this.sensors.ppmRange.third){for(let t in this.sensors.ppmState)this.sensors.ppmState[t]=!1;this.sensors.ppmState.orange=!0}if(this.sensors.ppm>this.sensors.ppmRange.third){for(let t in this.sensors.ppmState)this.sensors.ppmState[t]=!1;this.sensors.ppmState.red=!0}}"queryResult"==e.type&&(this.queryResult=e.value)},this.ws.onerror=t=>{console.log("WSerror")},this.ws.onclose=t=>{console.log("WSclose"),this.reconnect()}},getData(t){this.ws.send(JSON.stringify({type:"getData",value:{startTime:t.startTime,endTime:t.endTime}}))},getTime(){let t=new Date,e={0:"ВС",1:"ПН",2:"ВТ",3:"СР",4:"ЧТ",5:"ПТ",6:"СБ"},s=()=>{this.time.hour=t.getHours(),this.time.min=t.getMinutes(),this.time.hour/10<1?this.time.hour="0"+this.time.hour:this.time.hour,this.time.min/10<1?this.time.min="0"+this.time.min:this.time.min,this.time.blink=!this.time.blink,this.autoMode&&this.autoModePlay(this.time.hour,this.time.min)},n=()=>{this.time.date=t.getDate(),this.time.month=t.getMonth()+1,this.time.year=t.getFullYear(),this.time.day=e[t.getDay()],this.time.date/10<1?this.time.date="0"+this.time.date:this.time.date,this.time.month/10<1?this.time.month="0"+this.time.month:this.time.month};s(),n(),setInterval((()=>{t=new Date,s(),n()}),1e3)},reconnect(){this.ws=null;try{setTimeout((()=>this.connect()),1e4)}catch{console.log("Не удачно!")}},autoModePlay(t,e){let s=this.timeOfSun.dawn.split(":"),n=this.timeOfSun.sunset.split(":"),a=60*Number(s[0])+Number(s[1]),i=60*Number(n[0])+Number(n[1]),o=60*Number(t)+Number(e);this.nightMode=!(o>=a&&o<=i)},initPpmRange(){localStorage.getItem("ppmRange")?this.sensors.ppmRange=JSON.parse(localStorage.getItem("ppmRange")):localStorage.setItem("ppmRange",JSON.stringify(this.sensors.ppmRange))},updatePpmRange(){localStorage.setItem("ppmRange",JSON.stringify(this.sensors.ppmRange))},initTimeOfSun(){localStorage.getItem("timeOfSun")?this.timeOfSun=JSON.parse(localStorage.getItem("timeOfSun")):localStorage.setItem("timeOfSun",JSON.stringify(this.timeOfSun))},updateTimeOfSun(){localStorage.setItem("timeOfSun",JSON.stringify(this.timeOfSun))}},mounted(){this.getTime(),this.connect(),this.initPpmRange(),this.initTimeOfSun(),setInterval((()=>{try{this.ws.send(JSON.stringify({type:"ping"}))}catch(t){console.log("WS is down: ",t)}}),6e5)}},p=s(89);const m=(0,p.Z)(u,[["render",d],["__scopeId","data-v-139fb890"]]);var h=m;const g={class:"blink"};function f(t,e,s,o,r,l){return(0,a.wg)(),(0,a.iD)("div",{class:"header",onClick:e[0]||(e[0]=(...t)=>l.toFull&&l.toFull(...t)),onselectstart:"return false"},[(0,a._)("div",{class:(0,i.C_)(["date",{dayDate:!s.nightMode}])},(0,i.zw)(s.time.date)+"."+(0,i.zw)(s.time.month)+"."+(0,i.zw)(s.time.year)+" "+(0,i.zw)(s.time.day),3),(0,a._)("div",{class:(0,i.C_)(["clock",{dayClock:!s.nightMode}])},[(0,a._)("div",null,(0,i.zw)(s.time.hour),1),(0,a._)("div",g,[(0,a.wy)((0,a._)("div",null,":",512),[[n.F8,s.time.blink]])]),(0,a._)("div",null,(0,i.zw)(s.time.min),1)],2)])}var v={name:"MainClock",props:{time:{type:Object},nightMode:{type:Boolean}},methods:{async toFull(){try{await navigator.wakeLock.request("screen")}catch(t){console.log(t),alert("Удержание экрана недоступно!")}document.documentElement.webkitRequestFullscreen()}}};const y=(0,p.Z)(v,[["render",f],["__scopeId","data-v-30e50914"]]);var S=y;const _=t=>((0,a.dD)("data-v-2debb2c7"),t=t(),(0,a.Cn)(),t),w={class:"sensorPanelWrap"},b={class:"sensor inTemp"},M={class:"value"},O=_((()=>(0,a._)("br",null,null,-1))),D={class:"textData"},T=_((()=>(0,a._)("div",{class:"icon"},null,-1))),x={class:"sensor outTemp"},k={class:"value"},C=_((()=>(0,a._)("br",null,null,-1))),I={class:"textData"},z=_((()=>(0,a._)("div",{class:"icon"},null,-1))),B={class:"sensor hum"},W={class:"value"},F=_((()=>(0,a._)("br",null,null,-1))),R={class:"textData"},U=_((()=>(0,a._)("div",{class:"icon"},null,-1))),P={class:"sensor ppm"},N={class:"value__ppm"},H=_((()=>(0,a._)("br",null,null,-1))),A={class:"textData__ppm"},j=_((()=>(0,a._)("br",null,null,-1))),L=_((()=>(0,a._)("div",{class:"icon"},null,-1))),Z={class:"sensor press"},q={class:"value"},E=_((()=>(0,a._)("br",null,null,-1))),J={class:"textData"},$=_((()=>(0,a._)("div",{class:"icon"},null,-1)));function V(t,e,s,n,o,r){const l=(0,a.up)("MainClock"),c=(0,a.up)("CirclePpm");return(0,a.wg)(),(0,a.iD)("div",w,[(0,a.Wm)(l,{time:s.time,nightMode:s.nightMode},null,8,["time","nightMode"]),(0,a._)("div",{class:(0,i.C_)(["panel",{dayPanel:!s.nightMode}]),onClick:e[0]||(e[0]=(...t)=>r.changeMode&&r.changeMode(...t))},[(0,a._)("div",b,[(0,a._)("div",M,[(0,a.Uk)(" Дом "),O,(0,a._)("p",D,(0,i.zw)(s.sensors.inTemp),1),(0,a.Uk)(" °C ")]),T]),(0,a._)("div",x,[(0,a._)("div",k,[(0,a.Uk)(" Улица "),C,(0,a.Uk)(),(0,a._)("p",I,(0,i.zw)(s.sensors.outTemp),1),(0,a.Uk)(" °C ")]),z]),(0,a._)("div",B,[(0,a._)("div",W,[(0,a.Uk)(" Влажность "),F,(0,a.Uk)(),(0,a._)("p",R,(0,i.zw)(s.sensors.hum),1),(0,a.Uk)(" % ")]),U]),(0,a._)("div",P,[(0,a.Wm)(c,{ppmState:s.sensors.ppmState,circleSize:s.circleSize,nightMode:s.nightMode},null,8,["ppmState","circleSize","nightMode"]),(0,a._)("div",N,[(0,a.Uk)(" CO₂ "),H,(0,a.Uk)(),(0,a._)("p",A,(0,i.zw)(s.sensors.ppm),1),(0,a.Uk)(),j,(0,a.Uk)(" ppm ")]),L]),(0,a._)("div",Z,[(0,a._)("div",q,[(0,a.Uk)(" Давление "),E,(0,a.Uk)(),(0,a._)("p",J,(0,i.zw)(s.sensors.press),1),(0,a.Uk)(" мм ")]),$])],2)])}var Y={name:"SensorPanel",props:{time:{type:Object},autoMode:{type:Boolean},nightMode:{type:Boolean},sensors:{type:Object},circleSize:{type:Object}},methods:{changeMode(){this.autoMode||this.$emit("onChangeMode")}}};const G=(0,p.Z)(Y,[["render",V],["__scopeId","data-v-2debb2c7"]]);var Q=G;const X=t=>((0,a.dD)("data-v-023ed9b6"),t=t(),(0,a.Cn)(),t),K={class:"settingBtnWrap"},tt=X((()=>(0,a._)("path",{d:"M15.2 6l-1.1-0.2c-0.1-0.2-0.1-0.4-0.2-0.6l0.6-0.9 0.5-0.7-2.6-2.6-0.7 0.5-0.9 0.6c-0.2-0.1-0.4-0.1-0.6-0.2l-0.2-1.1-0.2-0.8h-3.6l-0.2 0.8-0.2 1.1c-0.2 0.1-0.4 0.1-0.6 0.2l-0.9-0.6-0.7-0.4-2.5 2.5 0.5 0.7 0.6 0.9c-0.2 0.2-0.2 0.4-0.3 0.6l-1.1 0.2-0.8 0.2v3.6l0.8 0.2 1.1 0.2c0.1 0.2 0.1 0.4 0.2 0.6l-0.6 0.9-0.5 0.7 2.6 2.6 0.7-0.5 0.9-0.6c0.2 0.1 0.4 0.1 0.6 0.2l0.2 1.1 0.2 0.8h3.6l0.2-0.8 0.2-1.1c0.2-0.1 0.4-0.1 0.6-0.2l0.9 0.6 0.7 0.5 2.6-2.6-0.5-0.7-0.6-0.9c0.1-0.2 0.2-0.4 0.2-0.6l1.1-0.2 0.8-0.2v-3.6l-0.8-0.2zM15 9l-1.7 0.3c-0.1 0.5-0.3 1-0.6 1.5l0.9 1.4-1.4 1.4-1.4-0.9c-0.5 0.3-1 0.5-1.5 0.6l-0.3 1.7h-2l-0.3-1.7c-0.5-0.1-1-0.3-1.5-0.6l-1.4 0.9-1.4-1.4 0.9-1.4c-0.3-0.5-0.5-1-0.6-1.5l-1.7-0.3v-2l1.7-0.3c0.1-0.5 0.3-1 0.6-1.5l-1-1.4 1.4-1.4 1.4 0.9c0.5-0.3 1-0.5 1.5-0.6l0.4-1.7h2l0.3 1.7c0.5 0.1 1 0.3 1.5 0.6l1.4-0.9 1.4 1.4-0.9 1.4c0.3 0.5 0.5 1 0.6 1.5l1.7 0.3v2z"},null,-1))),et=X((()=>(0,a._)("path",{d:"M8 4.5c-1.9 0-3.5 1.6-3.5 3.5s1.6 3.5 3.5 3.5 3.5-1.6 3.5-3.5c0-1.9-1.6-3.5-3.5-3.5zM8 10.5c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5c0 1.4-1.1 2.5-2.5 2.5z"},null,-1))),st=[tt,et];function nt(t,e,s,n,o,r){return(0,a.wg)(),(0,a.iD)("div",K,[((0,a.wg)(),(0,a.iD)("svg",{class:(0,i.C_)(["settingBtn",{nightBtn:s.nightMode,dayBtn:!s.nightMode}]),viewBox:"0 0 17 17"},st,2))])}var at={name:"SettingButton",props:{nightMode:{type:Boolean}}};const it=(0,p.Z)(at,[["render",nt],["__scopeId","data-v-023ed9b6"]]);var ot=it;const rt=t=>((0,a.dD)("data-v-0776e31c"),t=t(),(0,a.Cn)(),t),lt={class:"homeBtnWrap"},ct=rt((()=>(0,a._)("path",{d:"M7.98 1.984l7 6h-2.003v6H9.96V10.97H5.997v3.016H2.982v-6H.979l7-6z"},null,-1))),dt=[ct];function ut(t,e,s,n,o,r){return(0,a.wg)(),(0,a.iD)("div",lt,[((0,a.wg)(),(0,a.iD)("svg",{class:(0,i.C_)(["homeBtn",{nightBtn:s.nightMode,dayBtn:!s.nightMode}]),viewBox:"0 0 17 17"},dt,2))])}var pt={name:"HomeButton",props:{nightMode:{type:Boolean}}};const mt=(0,p.Z)(pt,[["render",ut],["__scopeId","data-v-0776e31c"]]);var ht=mt;const gt=t=>((0,a.dD)("data-v-5f68207f"),t=t(),(0,a.Cn)(),t),ft={class:"historyBtnWrap"},vt=gt((()=>(0,a._)("path",{d:"M14 .978H4.062l-2.03 2.006h-.006v12h10v-12H3.002l1.06-1h8.954v11.928l.984-1V.978z"},null,-1))),yt=[vt];function St(t,e,s,n,o,r){return(0,a.wg)(),(0,a.iD)("div",ft,[((0,a.wg)(),(0,a.iD)("svg",{class:(0,i.C_)(["historyBtn",{nightBtn:s.nightMode,dayBtn:!s.nightMode}]),viewBox:"0 0 16 16"},yt,2))])}var _t={name:"HistoryButton",props:{nightMode:{type:Boolean}}};const wt=(0,p.Z)(_t,[["render",St],["__scopeId","data-v-5f68207f"]]);var bt=wt;const Mt=t=>((0,a.dD)("data-v-c4702420"),t=t(),(0,a.Cn)(),t),Ot={class:"setting"},Dt={class:"settingBlock"},Tt=Mt((()=>(0,a._)("h1",null,"Настройки",-1))),xt={class:"settingContent"},kt={class:"settingItem"},Ct=Mt((()=>(0,a._)("h3",null,"Режим день/ночь",-1))),It={class:"switchBtnWrap"},zt={key:0,class:"onOff"},Bt={class:"interval"},Wt=["value"],Ft={class:"interval"},Rt=["value"],Ut={class:"settingItem"},Pt=Mt((()=>(0,a._)("h3",null,"PPM пределы",-1))),Nt={class:"listIntervals"},Ht={class:"interval"},At=["value"],jt={class:"interval"},Lt=["value"],Zt={class:"interval"},qt=["value"];function Et(t,e,s,n,o,r){return(0,a.wg)(),(0,a.iD)("div",Ot,[(0,a._)("div",Dt,[Tt,(0,a._)("div",xt,[(0,a._)("div",kt,[Ct,(0,a._)("div",It,[(0,a.Uk)(" ручной "),(0,a._)("div",{class:(0,i.C_)(["switchBtn",{switchOn:s.autoMode}]),onClick:e[0]||(e[0]=(...t)=>r.switchAutoMode&&r.switchAutoMode(...t))},null,2),(0,a.Uk)(" авто ")]),s.autoMode?((0,a.wg)(),(0,a.iD)("div",zt,[(0,a._)("div",Bt,[(0,a.Uk)("день "),(0,a._)("input",{type:"time",value:s.dawn,onInput:e[1]||(e[1]=(...t)=>r.updateDawn&&r.updateDawn(...t))},null,40,Wt)]),(0,a._)("div",Ft,[(0,a.Uk)("ночь "),(0,a._)("input",{type:"time",value:s.sunset,onInput:e[2]||(e[2]=(...t)=>r.updateSunset&&r.updateSunset(...t))},null,40,Rt)])])):(0,a.kq)("",!0)])]),(0,a._)("div",Ut,[Pt,(0,a._)("div",Nt,[(0,a._)("div",Ht,[(0,a.Uk)("Первый "),(0,a._)("input",{type:"text",value:s.first,onInput:e[3]||(e[3]=(...t)=>r.updateFirst&&r.updateFirst(...t))},null,40,At)]),(0,a._)("div",jt,[(0,a.Uk)("Второй "),(0,a._)("input",{type:"text",value:s.second,onInput:e[4]||(e[4]=(...t)=>r.updateSecond&&r.updateSecond(...t))},null,40,Lt)]),(0,a._)("div",Zt,[(0,a.Uk)("Третий "),(0,a._)("input",{type:"text",value:s.third,onInput:e[5]||(e[5]=(...t)=>r.updateThirs&&r.updateThirs(...t))},null,40,qt)])])])])])}var Jt={name:"SettingModal",data(){return{demo:""}},props:{autoMode:{type:Boolean},first:{type:Number},second:{type:Number},third:{type:Number},dawn:{type:String},sunset:{type:String}},methods:{updateOnOff(){this.$emit("updateTimeOfSun")},updateDawn(t){this.$emit("update:dawn",t.target.value),this.updateOnOff()},updateSunset(t){this.$emit("update:sunset",t.target.value),this.updateOnOff()},updatePpm(){this.$emit("updatePpm")},updateFirst(t){this.$emit("update:first",Number(t.target.value)),this.updatePpm()},updateSecond(t){this.$emit("update:second",Number(t.target.value)),this.updatePpm()},updateThirs(t){this.$emit("update:third",Number(t.target.value)),this.updatePpm()},switchAutoMode(){this.$emit("switchAutoMode")}}};const $t=(0,p.Z)(Jt,[["render",Et],["__scopeId","data-v-c4702420"]]);var Vt=$t;const Yt=["cx","cy","r"],Gt=["cx","cy","r"],Qt=["cx","cy","r"],Xt=["cx","cy","r"];function Kt(t,e,s,n,o,r){return(0,a.wg)(),(0,a.iD)("svg",{class:(0,i.C_)([{nightSvg:s.nightMode},"circleSvg"])},[(0,a._)("circle",{class:(0,i.C_)({current:s.ppmState.green}),cx:s.circleSize.cxy,cy:s.circleSize.cxy,r:s.circleSize.r,transform:"rotate(112)",stroke:"#7dff63"},null,10,Yt),(0,a._)("circle",{class:(0,i.C_)({current:s.ppmState.yellow}),cx:s.circleSize.cxy,cy:s.circleSize.cxy,r:s.circleSize.r,transform:"rotate(194)",stroke:"#fffc63"},null,10,Gt),(0,a._)("circle",{class:(0,i.C_)({current:s.ppmState.orange}),cx:s.circleSize.cxy,cy:s.circleSize.cxy,r:s.circleSize.r,transform:"rotate(276)",stroke:"#f74c23"},null,10,Qt),(0,a._)("circle",{class:(0,i.C_)({current:s.ppmState.red}),cx:s.circleSize.cxy,cy:s.circleSize.cxy,r:s.circleSize.r,transform:"rotate(-2)",stroke:"#f70000"},null,10,Xt)],2)}var te={name:"CirclePpm",props:{ppmState:{type:Object},circleSize:{type:Object},nightMode:{type:Boolean}},methods:{setCircleSize(){let t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;t>450&&t<=900&&e>800?(this.circleSize.cxy=180,this.circleSize.r=160):(this.circleSize.cxy=125,this.circleSize.r=100)}},mounted(){this.setCircleSize(),window.addEventListener("resize",this.setCircleSize)}};const ee=(0,p.Z)(te,[["render",Kt],["__scopeId","data-v-3b525a97"]]);var se=ee;const ne={id:"chart",class:"chart"};function ae(t,e,s,n,i,o){const r=(0,a.up)("apexchart");return(0,a.wg)(),(0,a.iD)("div",ne,[(0,a.Wm)(r,{type:"area",height:"250px",options:i.chartOptions,series:i.series},null,8,["options","series"])])}var ie={name:"BarChart",props:{dataSet:{type:Object}},data(){return{series:[{name:"Улица",data:[]},{name:"Дом",data:[]}],chartOptions:{chart:{type:"area"},title:{text:"Температура",align:"left",margin:10,offsetX:50,offsetY:5,floating:!0,style:{fontSize:"14px",fontWeight:"bold",fontFamily:"Jura",color:"#fffde0"}},dataLabels:{enabled:!0,enabledOnSeries:[2,3],offsetY:10,formatter:function(t){return t.toFixed(1)+" °C"}},colors:["#F1c063","#008110","#2e80c7","#c75e2e"],stroke:{curve:"smooth"},legend:{labels:{useSeriesColors:!0}},yaxis:{labels:{formatter:t=>t?t.toFixed(1):t,style:{colors:"#fffde0"}}},xaxis:{type:"datetime",categories:[(new Date).toISOString()],labels:{datetimeUTC:!1,style:{colors:"#fffde0"}}},tooltip:{x:{format:"dd.MM.yyyy HH:mm"}},noData:{text:"Нет данных"},chart:{toolbar:{show:!0,tools:{zoomin:!1,zoomout:!1}},animations:{enabled:!1,easing:"easeinout",speed:800,animateGradually:{enabled:!1,delay:150},dynamicAnimation:{enabled:!0,speed:350}},locales:[{name:"ru",options:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortMonths:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}}],defaultLocale:"ru"}}}},methods:{},watch:{dataSet(t){this.series=t.series}}};const oe=(0,p.Z)(ie,[["render",ae],["__scopeId","data-v-cab01ed8"]]);var re=oe;const le=t=>((0,a.dD)("data-v-d9c37f8a"),t=t(),(0,a.Cn)(),t),ce={class:"LeftBtnWrap"},de=le((()=>(0,a._)("svg",{class:"LeftBtn",viewBox:"0 0 34 50"},[(0,a._)("defs"),(0,a._)("polygon",{class:"cls-1",points:"34 50 0 25 34 0 22 25 34 50"})],-1))),ue=[de];function pe(t,e,s,n,i,o){return(0,a.wg)(),(0,a.iD)("div",ce,ue)}var me={name:"LeftButton"};const he=(0,p.Z)(me,[["render",pe],["__scopeId","data-v-d9c37f8a"]]);var ge=he;const fe=t=>((0,a.dD)("data-v-22641d02"),t=t(),(0,a.Cn)(),t),ve={class:"LeftBtnWrap"},ye=fe((()=>(0,a._)("svg",{class:"LeftBtn",viewBox:"0 0 34 50"},[(0,a._)("defs"),(0,a._)("polygon",{class:"cls-1",points:"0 50 34 25 0 0 12 25 0 50"})],-1))),Se=[ye];function _e(t,e,s,n,i,o){return(0,a.wg)(),(0,a.iD)("div",ve,Se)}var we={name:"RightButton"};const be=(0,p.Z)(we,[["render",_e],["__scopeId","data-v-22641d02"]]);var Me=be;const Oe={class:"chart"};function De(t,e,s,n,i,o){const r=(0,a.up)("apexchart");return(0,a.wg)(),(0,a.iD)("div",Oe,[(0,a.Wm)(r,{type:"area",height:"150px",options:i.chartOptions,series:i.series},null,8,["options","series"])])}var Te={name:"SecondChart",props:{dataSet:{type:Object}},data(){return{series:[{name:"Улица",data:[]}],chartOptions:{chart:{type:"area"},title:{text:"Атмосферное давление",align:"left",margin:10,offsetX:50,offsetY:5,floating:!0,style:{fontSize:"14px",fontWeight:"bold",fontFamily:"Jura",color:"#fffde0"}},dataLabels:{enabled:!0,formatter:function(t){return t.toFixed()+" мм"},offsetY:-5},colors:["#ED3B83"],stroke:{curve:"smooth"},legend:{labels:{useSeriesColors:!0}},yaxis:{labels:{formatter:t=>t?t.toFixed(0):t,style:{colors:"#fffde0"}}},xaxis:{type:"datetime",categories:[(new Date).toISOString()],labels:{datetimeUTC:!1,style:{colors:"#fffde0"}}},tooltip:{x:{format:"dd.MM.yyyy HH:mm"}},noData:{text:"Нет данных.."},chart:{toolbar:{show:!0,tools:{zoomin:!1,zoomout:!1}},animations:{enabled:!1,easing:"easeinout",speed:800,animateGradually:{enabled:!1,delay:150},dynamicAnimation:{enabled:!0,speed:350}},locales:[{name:"ru",options:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortMonths:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}}],defaultLocale:"ru"}}}},methods:{},watch:{dataSet(t){this.chartOptions={xaxis:{categories:t.categories}},this.series=t.series}}};const xe=(0,p.Z)(Te,[["render",De],["__scopeId","data-v-3d3cbdde"]]);var ke=xe;const Ce={class:"chart"};function Ie(t,e,s,n,i,o){const r=(0,a.up)("apexchart");return(0,a.wg)(),(0,a.iD)("div",Ce,[(0,a.Wm)(r,{type:"line",height:"150px",options:i.chartOptions,series:i.series},null,8,["options","series"])])}var ze={name:"ThirdChart",props:{dataSet:{type:Object}},data(){return{yaxis:[{labels:{formatter:t=>t?t.toFixed(0):t,style:{colors:"#fffde0"}}},{opposite:!0,logarithmic:!1,logBase:10,tickAmount:4,floating:!0,labels:{formatter:t=>t?t.toFixed(0):t,style:{colors:"#fffde0"}}}],series:[{name:"Влажность",data:[],type:"column"},{name:"CO₂",data:[],type:"line"}],chartOptions:{chart:{type:"line"},title:{text:"Влажность и CO₂",align:"left",margin:10,offsetX:40,offsetY:5,floating:!0,style:{fontSize:"14px",fontWeight:"bold",fontFamily:"Jura",color:"#fffde0"}},dataLabels:{enabled:!0,enabledOnSeries:[1],formatter:function(t){return t.toFixed()},offsetY:-5},colors:["#4eabda","#40af05"],stroke:{curve:"smooth"},legend:{labels:{useSeriesColors:!0}},xaxis:{type:"datetime",categories:[(new Date).toISOString()],labels:{datetimeUTC:!1,style:{colors:"#fffde0"}}},tooltip:{x:{format:"dd.MM.yyyy HH:mm"}},noData:{text:"Нет данных.."},chart:{toolbar:{show:!0,tools:{zoomin:!1,zoomout:!1}},animations:{enabled:!1,easing:"easeinout",speed:800,animateGradually:{enabled:!1,delay:150},dynamicAnimation:{enabled:!0,speed:350}},locales:[{name:"ru",options:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortMonths:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}}],defaultLocale:"ru"}}}},methods:{},watch:{dataSet(t){this.yaxis[1].min=function(){return Math.min(...t.series[1].data.map((t=>t[1])))},this.chartOptions={yaxis:this.yaxis},this.series=t.series}}};const Be=(0,p.Z)(ze,[["render",Ie],["__scopeId","data-v-0f0adb7c"]]);var We=Be;const Fe={class:"sk-chase"},Re=(0,a.uE)('<div class="sk-chase-dot" data-v-db63c9b0></div><div class="sk-chase-dot" data-v-db63c9b0></div><div class="sk-chase-dot" data-v-db63c9b0></div><div class="sk-chase-dot" data-v-db63c9b0></div><div class="sk-chase-dot" data-v-db63c9b0></div><div class="sk-chase-dot" data-v-db63c9b0></div>',6),Ue=[Re];function Pe(t,e,s,n,i,o){return(0,a.wg)(),(0,a.iD)("div",Fe,Ue)}var Ne={name:"my-preloader"};const He=(0,p.Z)(Ne,[["render",Pe],["__scopeId","data-v-db63c9b0"]]);var Ae=He,je=[S,Q,ot,Vt,se,ht,bt,re,ge,Me,ke,We,Ae];const Le={class:"historyChartsWrap",onselectstart:"return false"},Ze={class:"topBar"},qe={class:"bottomBar"};function Ee(t,e,s,o,r,l){const c=(0,a.up)("LeftButton"),d=(0,a.up)("RightButton"),u=(0,a.up)("BarChart"),p=(0,a.up)("SecondChart"),m=(0,a.up)("ThirdChart"),h=(0,a.up)("my-preloader");return(0,a.wg)(),(0,a.iD)("div",Le,[(0,a._)("div",Ze,[(0,a._)("div",{class:(0,i.C_)(["day intervalButton",{current:r.selector.day}]),onClick:e[0]||(e[0]=t=>l.setSelector("day"))},"Сутки",2),(0,a._)("div",{class:(0,i.C_)(["week intervalButton",{current:r.selector.week}]),onClick:e[1]||(e[1]=t=>l.setSelector("week"))},"Неделя",2),(0,a._)("div",{class:(0,i.C_)(["month intervalButton",{current:r.selector.month}]),onClick:e[2]||(e[2]=t=>l.setSelector("month"))},"Месяц",2),(0,a._)("div",{class:(0,i.C_)(["year intervalButton",{current:r.selector.year}]),onClick:e[3]||(e[3]=t=>l.setSelector("year"))},"Год",2)]),(0,a._)("div",qe,[(0,a.Wm)(c,{onClick:l.moveLeft},null,8,["onClick"]),(0,a._)("div",{class:(0,i.C_)(["inputWrap",{wrongInput:r.wrongInput}])},[(0,a.wy)((0,a._)("input",{class:(0,i.C_)(["input",{currentInput:r.selector.interval}]),type:"date","onUpdate:modelValue":e[4]||(e[4]=t=>r.startInput=t),onInput:e[5]||(e[5]=(...t)=>l.updateStart&&l.updateStart(...t)),onClick:e[6]||(e[6]=t=>l.setSelector("interval"))},null,34),[[n.nr,r.startInput]])],2),(0,a._)("div",{class:(0,i.C_)(["inputWrap",{wrongInput:r.wrongInput}])},[(0,a.wy)((0,a._)("input",{class:(0,i.C_)(["input",{currentInput:r.selector.interval}]),type:"date","onUpdate:modelValue":e[7]||(e[7]=t=>r.endInput=t),onInput:e[8]||(e[8]=(...t)=>l.updateEnd&&l.updateEnd(...t)),onClick:e[9]||(e[9]=t=>l.setSelector("interval"))},null,34),[[n.nr,r.endInput]])],2),(0,a.Wm)(d,{onClick:l.moveRight},null,8,["onClick"])]),(0,a.Wm)(u,{dataSet:r.dataSet.temp,class:(0,i.C_)({loading:r.loadingData})},null,8,["dataSet","class"]),(0,a.Wm)(p,{dataSet:r.dataSet.press,class:(0,i.C_)({loading:r.loadingData})},null,8,["dataSet","class"]),(0,a.Wm)(m,{dataSet:r.dataSet.hum,class:(0,i.C_)({loading:r.loadingData})},null,8,["dataSet","class"]),r.loadingData?((0,a.wg)(),(0,a.j4)(h,{key:0,class:"preload"})):(0,a.kq)("",!0)])}var Je={data(){return{loadingData:!1,wrongInput:!1,selector:{day:!0,week:!1,month:!1,year:!1,interval:!1},startInput:"",endInput:"",startTime:"",endTime:"",rangeOfDays:1,dataSet:{temp:{},press:{},humPpm:{}}}},props:{queryResult:{type:Object},wsAlive:{type:Boolean}},methods:{updateStart(t){let e=Date.parse(t.target.value)+864e5;this.checkWrong(e,this.endTime)||(this.startTime=Date.parse(t.target.value),this.getData())},updateEnd(t){let e=Date.parse(t.target.value)+864e5;this.checkWrong(this.startTime,e)||(this.endTime=e,this.getData())},getData(){this.loadingData=!0,this.wsAlive?this.$emit("onQuery",{startTime:this.startTime,endTime:this.endTime}):setTimeout((()=>{this.getData()}),100)},setSelector(t){for(let e in this.selector)this.selector[e]=!1;this.selector[t]=!0,this.selector.interval||(this.setNewDate(),this.getData())},setNewDate(){this.selector.day&&(this.rangeOfDays=1),this.selector.week&&(this.rangeOfDays=7),this.selector.month&&(this.rangeOfDays=31),this.selector.year&&(this.rangeOfDays=366),this.startTime=(new Date).setHours((new Date).getHours()-24*this.rangeOfDays),this.endTime=Date.now()},moveLeft(){this.startTime-=864e5*this.rangeOfDays,this.endTime-=864e5*this.rangeOfDays,this.getData()},moveRight(){this.startTime+=864e5*this.rangeOfDays,this.endTime+=864e5*this.rangeOfDays,this.getData()},makeDataSet(t){if(t.length>0){let e=t.filter(((t,e,s)=>!!this.selector.day||(0==e||e==s.length-1||(t.content.outTemp>s[e-1].content.outTemp&&t.content.outTemp>s[e+1].content.outTemp||t.content.outTemp<s[e-1].content.outTemp&&t.content.outTemp<s[e+1].content.outTemp||void 0)))),s=1;this.selector.day&&(s=4),this.selector.week&&(s=20),this.selector.month&&(s=50),this.selector.year&&(s=70),this.selector.interval&&(s=2*(1- -((new Date(this.endTime)-new Date(this.startTime))/864e5).toFixed()));let n=t.filter(((t,e,n)=>{if((e+1)%s==0)return!0})),a=e.reduce((function(t,e,s,n){if(0==s)return{max:- -e.content.outTemp,min:- -e.content.outTemp,categories:[e.content.timestamp,e.content.timestamp]};let a=t.max,i=t.min,o=t.categories;return- -e.content.outTemp>t.max&&(a=- -e.content.outTemp,o[0]=e.content.timestamp),- -e.content.outTemp<t.min&&(i=- -e.content.outTemp,o[1]=e.content.timestamp),{max:a,min:i,categories:o}}),{});this.dataSet.temp={series:[{name:"Дом",data:[...e.map((t=>[t.content.timestamp,- -t.content.inTemp]))]},{name:"Улица",data:[...e.map((t=>[t.content.timestamp,- -t.content.outTemp]))]},{name:"min",data:[[a.categories[1],a.min]]},{name:"max",data:[[a.categories[0],a.max]]}],categories:e.map((t=>t.content.timestamp))},this.dataSet.press={series:[{name:"Дом",data:[...n.map((t=>- -t.content.press))]}],categories:n.map((t=>t.content.timestamp))},this.dataSet.hum={series:[{name:"Влажность",data:[...n.map((t=>[t.content.timestamp,- -t.content.hum]))]},{name:"CO₂",data:[...n.map((t=>[t.content.timestamp,- -t.content.ppm]))]}]},this.loadingData=!1}},checkWrong(t,e){if(!(t<=e))return document.getElementsByClassName("bottomBar")[0].focus(),this.wrongInput=!0,setTimeout((()=>{this.wrongInput=!1}),1500),!0}},watch:{queryResult(t){setTimeout((()=>{this.makeDataSet(t)}),200)},startTime(t){this.startInput=new Date(t).toISOString().slice(0,10)},endTime(t){this.endInput=new Date(t).toISOString().slice(0,10)}},mounted(){this.setNewDate(),this.getData()}};const $e=(0,p.Z)(Je,[["render",Ee],["__scopeId","data-v-7bfb8c1c"]]);var Ve=$e,Ye=s(2483);const Ge=[{path:"/",component:Q},{path:"/history",component:Ve}],Qe=(0,Ye.p7)({routes:Ge,history:(0,Ye.r5)()});var Xe=Qe,Ke=s(407),ts=s.n(Ke);const es=(0,n.ri)(h);je.forEach((t=>es.component(t.name,t))),es.use(Xe).use(ts()).mount("#app")}},e={};function s(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,n,a,i){if(!n){var o=1/0;for(d=0;d<t.length;d++){n=t[d][0],a=t[d][1],i=t[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(s.O).every((function(t){return s.O[t](n[l])}))?n.splice(l--,1):(r=!1,i<o&&(o=i));if(r){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[n,a,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,i,o=n[0],r=n[1],l=n[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)var d=l(s)}for(e&&e(n);c<o.length;c++)i=o[c],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(d)},n=self["webpackChunkmeteoclient"]=self["webpackChunkmeteoclient"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(9950)}));n=s.O(n)})();
//# sourceMappingURL=app.de2b6801.js.map